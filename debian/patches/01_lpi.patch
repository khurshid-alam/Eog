# Description: add launchpad menu items to the application
# UbuntuSpecific: launchpad
#
Index: eog-2.91.3/data/eog-ui.xml
===================================================================
--- eog-2.91.3.orig/data/eog-ui.xml	2010-07-18 22:49:39.000000000 +0200
+++ eog-2.91.3/data/eog-ui.xml	2010-12-01 18:45:37.849433000 +0100
@@ -69,6 +69,7 @@
     </menu>
     <menu action="Help">
       <menuitem action="HelpManual"/>
+      <placeholder name="LaunchpadItems"/>
       <menuitem action="HelpAbout"/>
     </menu>
   </menubar>
Index: eog-2.91.3/src/eog-window.c
===================================================================
--- eog-2.91.3.orig/src/eog-window.c	2010-11-20 14:16:31.000000000 +0100
+++ eog-2.91.3/src/eog-window.c	2010-12-01 18:47:38.000000000 +0100
@@ -67,6 +67,8 @@
 #include <gio/gdesktopappinfo.h>
 #include <gtk/gtk.h>
 
+#include <launchpad-integration.h>
+
 #if HAVE_LCMS
 #include <X11/Xlib.h>
 #include <X11/Xatom.h>
@@ -4238,6 +4240,9 @@
                 g_error_free (error);
         }
 
+	launchpad_integration_add_ui (priv->ui_mgr,
+				      "/MainMenu/Help/LaunchpadItems");
+
 	g_signal_connect (priv->ui_mgr, "connect_proxy",
 			  G_CALLBACK (connect_proxy_cb), window);
 	g_signal_connect (priv->ui_mgr, "disconnect_proxy",
Index: eog-2.91.3/configure.ac
===================================================================
--- eog-2.91.3.orig/configure.ac	2010-12-01 18:45:43.433433001 +0100
+++ eog-2.91.3/configure.ac	2010-12-01 18:47:22.000000000 +0100
@@ -101,6 +101,7 @@
              gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED \
              gdk-pixbuf-2.0 >= $GDKPIXBUF_REQUIRED \
              gtk+-unix-print-3.0 >= $GTK_PRINT_REQUIRED \
+             launchpad-integration-3.0 \
              gnome-icon-theme >= $GNOME_ICON_THEME_REQUIRED \
              shared-mime-info >= $SHARED_MIME_INFO_REQUIRED \
              gsettings-desktop-schemas >= $DESKTOP_SCHEMAS_REQUIRED"
